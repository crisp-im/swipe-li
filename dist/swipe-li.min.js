angular.module("swipeLi",[]),function(){for(var n=0,e=["ms","moz","webkit","o"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var t=(new Date).getTime(),i=Math.max(0,16-(t-n)),a=window.setTimeout(function(){e(t+i)},i);return n=t+i,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})}(),angular.module("swipeLi").directive("swipeLi",["$timeout","$window","$swipe",function(n,e,t){"use strict";return{restrict:"A",link:function(i,a,o){var s={};s.onComplete=function(e){n(function(){s.showPane(1,!0),i.$apply(o[e])},300)};var r=75,m=110,u=.3,c=a.find("div"),w=a.find("ul"),l=a.find("li"),f=0,d=3,h=0,p={x:0,y:0},v=!1;s.init=function(){s.setPaneDimensions(),s.showPane(1,!1),angular.element(e).on("load resize orientationchange",function(){s.setPaneDimensions()})},s.setPaneDimensions=function(){f=c[0].offsetWidth,angular.forEach(l,function(n){angular.element(n).css({width:f+"px"})}),angular.element(w).css({width:f*d+"px"})},s.showPane=function(n,e){n=Math.max(0,Math.min(n,d-1)),h=n;var t=-(100/d*h);s.setContainerOffset(t,e)},s.setContainerOffset=function(n,e){w.removeClass("animate"),e&&w.addClass("animate"),w.css("transform","translate3d("+n+"%,0,0) scale3d(1,1,1)")},s.init(),t.bind(angular.element(document),{cancel:function(){v=!1,s.showPane(h,!0)},end:function(){v=!1,s.showPane(h,!0)}},["touch","mouse"]),t.bind(angular.element(c[0]),{start:function(n,e){p=n,e.preventDefault(),v=!0},cancel:function(){v=!1,s.showPane(h,!0)},end:function(){v=!1,s.showPane(h,!0)},move:function(n,e){e.preventDefault();var t=Math.abs(n.y-p.y),i=n.x-p.x;if(v&&r>t&&u>t/i)if(Math.abs(i)>m)i>0?(s.showPane(0,!0),s.onComplete("accept")):(s.showPane(2,!0),s.onComplete("reject"));else{var a=-(100/d)*h,o=100/f*i/d;(0===h&&i>0||0>i&&h==d-1)&&(o*=.4),s.setContainerOffset(o+a)}else v=!1}},["touch","mouse"])}}}]);