angular.module("swipeLi",[]),angular.module("swipeLi").provider("hammerRemote",function(){"use strict";var e=this;return this.globalOptions={},this.$get=["$q",function(t){var n,i,r={count:0},a={},o="__HAMMER_ID_";return a.globalOptions=e.globalOptions,a.getHammer=function(e){return r.hasOwnProperty(e)||n(e),r[e].deferred.promise},a.register=function(e,t){var a=new window.Hammer(e,t),s=o+r.count+"__";return r.count++,r.hasOwnProperty(s)||n(s),r[s].isResolved&&n(s),i(a,s),s},a.unregister=function(e){r.hasOwnProperty(e)&&delete r[e]},n=function(e){r[e]={deferred:t.defer(),isResolved:!1}},i=function(e,t){r[t].deferred.resolve(e),r[t].isResolved=!0},a}],this}),function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),r=window.setTimeout(function(){t(n+i)},i);return e=n+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),angular.module("swipeLi").directive("swipeLi",["hammerRemote","$timeout","$window",function(e,t,n){"use strict";return{restrict:"A",link:function(i,r,a){function o(){m=s[0].offsetWidth,angular.forEach(c,function(e){angular.element(e).css({width:m+"px"})}),angular.element(u).css({width:m*l+"px"})}i.onComplete=function(e){t(function(){i.showPane(1,!0),i.$apply(a[e])},300)};var s=r.find("div"),u=r.find("ul"),c=r.find("li"),m=0,l=3,d=0;i.init=function(){o(),i.showPane(1,!1),angular.element(n).on("load resize orientationchange",function(){o()})},i.showPane=function(e,t){e=Math.max(0,Math.min(e,l-1)),d=e;var n=-(100/l*d);i.setContainerOffset(n,t)},i.setContainerOffset=function(e,t){u.removeClass("animate"),t&&u.addClass("animate"),u.css("transform","translate3d("+e+"%,0,0) scale3d(1,1,1)")},i.handleHammer=function(e){switch(e.gesture.preventDefault(),e.type){case"dragright":case"dragleft":var t=-(100/l)*d,n=100/m*e.gesture.deltaX/l;(0===d&&"right"===e.gesture.direction||d==l-1&&"left"==e.gesture.direction)&&(n*=.4),i.setContainerOffset(n+t);break;case"swipeleft":i.showPane(2,!0),i.onComplete("reject"),e.gesture.stopDetect();break;case"swiperight":i.showPane(0,!0),i.onComplete("accept"),e.gesture.stopDetect();break;case"release":Math.abs(e.gesture.deltaX)>m/2?"right"==e.gesture.direction?(i.showPane(0,!0),i.onComplete("accept")):(i.showPane(2,!0),i.onComplete("reject")):i.showPane(d,!0)}},i.id=e.register(s[0],{drag_lock_to_axis:!0}),e.getHammer(i.id).then(function(e){e.on("release dragleft dragright swipeleft swiperight",i.handleHammer),i.init()}),i.$on("$destroy",function(){e.unregister(i.id)})}}}]);