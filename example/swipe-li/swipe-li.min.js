angular.module("swipeLi",[]),function(){for(var n=0,e=["ms","moz","webkit","o"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var t=(new Date).getTime(),i=Math.max(0,16-(t-n)),a=window.setTimeout(function(){e(t+i)},i);return n=t+i,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})}(),angular.module("swipeLi").directive("swipeLi",["$timeout","$window","$swipe",function(n,e,t){"use strict";return{restrict:"A",link:function(i,a,o){function r(){f=c[0].offsetWidth,angular.forEach(w,function(n){angular.element(n).css({width:f+"px"})}),angular.element(l).css({width:f*d+"px"})}i.onComplete=function(e){n(function(){i.showPane(1,!0),i.$apply(o[e])},300)};var s=75,m=160,u=.3,c=a.find("div"),l=a.find("ul"),w=a.find("li"),f=0,d=3,h=0,p={x:0,y:0},v=!1;i.init=function(){r(),i.showPane(1,!1),angular.element(e).on("load resize orientationchange",function(){r()})},i.showPane=function(n,e){n=Math.max(0,Math.min(n,d-1)),h=n;var t=-(100/d*h);i.setContainerOffset(t,e)},i.setContainerOffset=function(n,e){l.removeClass("animate"),e&&l.addClass("animate"),l.css("transform","translate3d("+n+"%,0,0) scale3d(1,1,1)")},i.init(),t.bind(angular.element(c[0]),{start:function(n,e){p=n,e.preventDefault(),v=!0},cancel:function(){v=!1,i.showPane(h,!0)},end:function(){v=!1,i.showPane(h,!0)},move:function(n,e){e.preventDefault();var t=Math.abs(n.y-p.y),a=n.x-p.x;if(console.log(a),v&&s>t&&u>t/a)if(Math.abs(a)>m)a>0?(i.showPane(0,!0),i.onComplete("accept")):(i.showPane(2,!0),i.onComplete("reject"));else{var o=-(100/d)*h,r=100/f*a/d;(0===h&&a>0||0>a&&h==d-1)&&(r*=.4),i.setContainerOffset(r+o)}else v=!1}},["touch","mouse"])}}}]);